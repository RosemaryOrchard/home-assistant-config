- name: "Electric: Export"
  unique_id: "smart_meter_electricity_export"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "energy"
  unit_of_measurement: "kWh"
  state_class: "total_increasing"
  value_template: "{{ value_json['electricitymeter']['energy']['export']['cumulative'] }}"
  icon: "mdi:flash"
- name: "Electric: Import"
  unique_id: "smart_meter_electricity_import"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "energy"
  unit_of_measurement: "kWh"
  state_class: "total_increasing"
  value_template: >
    {% if value_json['electricitymeter']['energy']['import']['cumulative'] == 0 %}
      {{ states('sensor.smart_meter_electricity_import') }}
    {% else %}
      {{ value_json['electricitymeter']['energy']['import']['cumulative'] }}
    {% endif %}
  icon: "mdi:home-lightning-bolt-outline"
- name: "Electric: Import (Today)"
  unique_id: "smart_meter_electricity_import_today"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "energy"
  unit_of_measurement: "kWh"
  state_class: "measurement"
  value_template: >
    {% if value_json['electricitymeter']['energy']['import']['day'] == 0 
      and now() > now().replace(hour=0).replace(minute=1).replace(second=0).replace(microsecond=0) %}
      {{ states('sensor.smart_meter_electricity_import_today') }}
    {% else %}
      {{ value_json['electricitymeter']['energy']['import']['day'] }}
    {% endif %}
  icon: "mdi:home-lightning-bolt-outline"
- name: "Electric: Import (This week)"
  unique_id: "smart_meter_electricity_import_week"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "energy"
  unit_of_measurement: "kWh"
  state_class: "measurement"
  value_template: "{{ value_json['electricitymeter']['energy']['import']['week'] }}"
  icon: "mdi:flash"
- name: "Electric: Import (This month)"
  unique_id: "smart_meter_electricity_import_month"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "energy"
  unit_of_measurement: "kWh"
  state_class: "measurement"
  value_template: "{{ value_json['electricitymeter']['energy']['import']['month'] }}"
  icon: "mdi:home-lightning-bolt-outline"
- name: "Electric: Import Unit Rate"
  unique_id: "smart_meter_electricity_import_unit_rate"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "monetary"
  unit_of_measurement: "GBP/kWh"
  state_class: "measurement"
  value_template: "{{ value_json['electricitymeter']['energy']['import']['price']['unitrate'] }}"
  icon: "mdi:cash"
- name: "Electric: Import Standing Charge"
  unique_id: "smart_meter_electricity_import_standing_charge"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "monetary"
  unit_of_measurement: "GBP"
  state_class: "measurement"
  value_template: "{{ value_json['electricitymeter']['energy']['import']['price']['standingcharge'] }}"
  icon: "mdi:cash"
- name: "Electric: Power"
  unique_id: "smart_meter_electricity_power"
  state_topic: "glow/441793525B48/SENSOR/electricitymeter"
  device_class: "power"
  unit_of_measurement: "kW"
  state_class: "measurement"
  value_template: "{{ value_json['electricitymeter']['power']['value'] }}"
  icon: "mdi:home-lightning-bolt-outline"
